<!DOCTYPE html>
<html lang="en">

<head>
  <%- include("components/head.ejs") %>

  <title>P치gina do usu치rio</title>
</head>

<body id="userpage">
  <% if(locals.user && user) {%>
    <%- include("components/header_logado.ejs") %>
  <% } else { %>
    <%- include("components/header.ejs") %>
  <% } %>


  <main class="userpage_main">
    <div class="title-bg">
      <div class="container">
        <p class="font-2-l-b color-5 fadeInLeft" data-anime="200">P치gina de Usu치rio</p>
        <h1 class="font-1-xxl color-0 fadeInLeft" data-anime="400"><%= user.nome %></h1>
      </div>
    </div>

    <% if (typeof ok != "undefined" ){ %>

      <%- include("modals/perfilAtualizado.ejs"); %>

    <% }  %>

    <div class="userpage_content container fadeInDown" data-anime="400">
      <%- include("components/section_Usuario.ejs") %>

      <section class="userpage_info fadeInUp" data-anime="800" aria-label="Dados Pessoais">
        <h2 class="color-0">Dados Pessoais</h2>
        <form class="userpage_form" action="/perfil?_method=PUT" method="POST">

          <div>
            <label for="email">Email</label>
            <input type="email" id="email" name="email" placeholder="<%= user.email %>" required>
          </div>

          <div>
            <label for="cpf">CPF</label>
            <input style="pointer-events:none; background-color: #BDBDBD;" type="text" id="cpf" name="cpf" placeholder="<%= user.cpf %>" required>
          </div>

          <input style="pointer-events:none; background-color: #BDBDBD;" type="hidden" name="cpf" value="<%= user.cpf %>">

          <div class="col-2">
            <label for="nome">Nome Completo</label>
            <input type="text" id="nome" name="nome" placeholder="<%= user.nome %>" required>
          </div>

          <div>
            <label for="telefone">Telefone</label>
            <input type="text" id="telefone" name="telefone" placeholder="<%= user.telefone %>" required>
          </div>

          <% const data = new Date(user.dtNascimento);
              const dia = data.getUTCDate();
              const mes = data.getUTCMonth() + 1;
              const ano = data.getUTCFullYear();
          %>

          <div>
            <label for="nascimento">Data de Nascimento</label>
            <input placeholder="<%= dia + "/" + mes + "/" + ano %>" type="text" onfocus="(this.type='date')" onblur="(this.type='date')" id="dtNascimento" name="dtNascimento" required>
          </div>

          <button class="update_userpage_button col-2" type="submit">Atualizar perfil</button>

        </form>
      </section>

    </div>

  </main>

  <%- include("components/footer.ejs") %>
  
  <script src="./scripts/plugins/simple-anime.js"></script>
  <script src="./scripts/script.js"></script>
  <script src="./scripts/modalErrors.js"></script>
</body>

</html>