<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <%- include("components/head.ejs") %>

    <title>Projeto Integrador</title>
  </head>

  <body>
    <% if(locals.user && user) {%> <%- include("components/header_logado.ejs")
    %> <% } else { %> <%- include("components/header.ejs") %> <% } %>

    <main class="catalog_products_main">
      <div class="title-bg">
        <div class="title container">
          <p class="font-2-l-b color-5 fadeInLeft" data-anime="200">
            Escolha a melhor para você
          </p>
          <h1 class="font-1-xxl color-0 fadeInLeft" data-anime="400">
            nossas bebidas<span class="color-p1">.</span>
          </h1>
          <% if(locals.user && user) {%>
          <p
            style="margin-top: 10px"
            class="font-2-l-b color-5 fadeInLeft"
            data-anime="200"
          >
            Olá, <%= user.nome.split(' ')[0] %>
          </p>
          <% } %>
        </div>
      </div>
      <nav aria-label="..." class="container">
          <ul class="pagination pagination-sm">            

            <li class="page-item <%= page <= 1 ? 'disabled' : '' %>">
              <a class="page-link" href="?page=<%=prevPage%>"><i class="fas fa-chevron-left"></i></a>
            </li>
            <% for(let nrPagina = 1; nrPagina <= totalPagina; nrPagina ++) {%>
              <li class="page-item <%= nrPagina == page ? 'current' : '' %>">
                <a class="page-link" href="?page=<%=nrPagina%>"><%=nrPagina%></a>
              </li>
            <%}%>
            <li class="page-item <%= page >= totalPagina ? 'disabled' : '' %>">
              <a class="page-link" href="?page=<%=nextPage%>"><i class="fas fa-chevron-right"></i></a>
            </li>
          </ul>
          <form class="form-search-product" action="/catalogo/search" method="get">
            <input
              class="input-search-product"
              type="search"
              placeholder="Pesquise um produto"
              aria-label="Search"
              name="key"
            />
            <button class="btn-search-product" type="submit">
              <i class="fas fa-search"></i>
            </button>            
          </form>
      </nav>
      <% for(let i=0; i < produtos.length; i++) { %>

      <div class="catalog_products container">
        <div class="catalog_products-image fadeInUp" data-anime="600">
          <img src="<%= produtos[i].imagem %>" width="1120" height="680" alt="Bebida Alcoólica"/>
          <span class="font-2-m color-0">R$<%= produtos[i].preco %></span>
        </div>
        <div class="catalog_products-content fadeInDown" data-anime="800">
          <h2 class="font-1-xl"><%= produtos[i].nome %></h2>
          <p class="font-2-s">
            <%= produtos[i].descricao %>
          </p>

          <ul class="font-1-m">
            <li>
              <img src="/images/icones/ingredientes.svg" width="32" height="32" alt=""/>
              <%= produtos[i].ingredientes %>
            </li>

            <li>
              <img
                src="/images/icones/preparo.svg" width="32" height="32" alt=""/> 
                <%= produtos[i].harmonizacao %>
            </li>

            <li>
              <img
                src="/images/icones/volume.svg"
                width="32"
                height="32"
                alt=""
              /><%= produtos[i].volume %>
            </li>

            <% if(produtos[i].alcoolico){ %>
            <li>
              <img src="/images/icones/graduacao_alcoolica.svg" width="32" height="32" alt=""/>
              <%= produtos[i].graduacao_alcoolica %>
            </li>
            <% } else{ %> 
              <li>
                <img src="/images/icones/graduacao_alcoolica.svg" width="32" height="32" alt=""/>
                Não alcoólico
              </li>
            <% } %>
          </ul>
          <a class="button arrow" href="/produto/<%=produtos[i].idProduto%>"
            >Mais Sobre</a
          >
        </div>
      </div>
      <% } %>
      <nav aria-label="..." class="container">
        <ul class="pagination pagination-sm">  
          <li class="page-item <%= page <= 1 ? 'disabled' : '' %>">
            <a class="page-link" href="?page=<%=prevPage%>"><i class="fas fa-chevron-left"></i></a>
          </li>
          <% for(let nrPagina = 1; nrPagina <= totalPagina; nrPagina ++) {%>
            <li class="page-item <%= nrPagina == page ? 'current' : '' %>">
              <a class="page-link" href="?page=<%=nrPagina%>"><%=nrPagina%></a>
            </li>
          <%}%>
          <li class="page-item <%= page >= totalPagina ? 'disabled' : '' %>">
            <a class="page-link" href="?page=<%=nextPage%>"><i class="fas fa-chevron-right"></i></a>
          </li>
        </ul>
      </nav>      
    </main>

    <%- include("components/footer.ejs") %>

    <script src="./scripts/plugins/simple-anime.js"></script>
    <script src="./scripts/script.js"></script>
  </body>
</html>
